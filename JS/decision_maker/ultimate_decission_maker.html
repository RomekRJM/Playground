<!DOCTYPE html>
<html lang="us">
<body>

<canvas id="roulette" width="600" height="600"
        style="border:1px solid #c3c3c3;">
  Your browser does not support the canvas element.
</canvas>

<script>
    const finish = 10;
    const duration = 10;
    const start = 0;
    let time;
    const fps = 16;
    let interval;

    function init() {
        time = 0;
        interval = setInterval(draw, 1000 / fps);
    }

    function draw() {
        const categories = ["CurveFever", "HexBall", "Rysowanie"];
        const colors = ["#FF0000A0", "#FFFF00A0", "#0000FFA0"];
        const r = 220;
        const x = 300;
        const y = 300;

        let canvas = document.getElementById("roulette");
        let ctx = canvas.getContext("2d");
        let i;
        let speed = 0;
        let arcPortion = 2 * Math.PI / colors.length;
        let startOfPortion = speed;
        let endOfPortion = 0;

        ctx.clearRect(0, 0, ctx.width, ctx.height);
        ctx.translate(x,y);

        for (i = 0; i < categories.length; ++i) {
            startOfPortion += arcPortion;
            endOfPortion = startOfPortion + arcPortion;
            ctx.fillStyle = colors[i];
            ctx.beginPath();
            ctx.arc(0, 0, r, startOfPortion, endOfPortion);
            ctx.lineTo(0, 0);
            ctx.closePath();
            ctx.fill();
        }

        let position = easeInOutQuad(time * 100 / duration, time, start, finish, duration);
        time += 1 / fps;
        if (position < finish) {
          ctx.rotate( ((2*Math.PI)*position/6));
          ctx.translate(-x, -y);
        } else {
          ctx.translate(-x, -y);
          clearInterval(interval);
        }
    }

    // formula     http://easings.net/
    // description https://stackoverflow.com/questions/8316882/what-is-an-easing-function
    // x: percent
    // t: current time,
    // b: beginning value,
    // c: change in value,
    // d: duration
    function easeInOutQuad(x, t, b, c, d) {
        if ((t /= d / 2) < 1) {
            return c / 2 * t * t + b;
        } else {
            return -c / 2 * ((--t) * (t - 2) - 1) + b;
        }
    }

    init();

</script>

</body>
</html>

